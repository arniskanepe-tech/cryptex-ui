<!doctype html>
<html lang="lv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cryptex demo (TRUE 3D)</title>

  <link rel="stylesheet" href="assets/cryptex.css?v=7" />
</head>
<body>
  <h2>Cryptex (standalone) — sequential unlock, final check only (TRUE 3D rings)</h2>

  <div style="margin-bottom:12px">
    Riņķu skaits:
    <input id="ringsCount" type="number" value="8" min="1" max="30" />
    Solution:
    <input id="solution" type="text" value="A1B2C3D4" />
    <button id="rebuild">Pārbūvēt</button>
    <button id="levelDone">+1 riņķis</button>
  </div>

  <div id="mount"></div>

  <script src="assets/cryptex.js?v=7"></script>
  <script>
    const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let cryptex;

    function normalizeSolution(len){
      let s = (solution.value||"").toUpperCase();
      if(s.length>len) s=s.slice(0,len);
      while(s.length<len) s+="A";
      solution.value=s;
      return s;
    }

    function build(){
      mount.innerHTML = "<div id='cryptex'></div>";
      const n = Number(ringsCount.value)||8;
      const sol = normalizeSolution(n);

      cryptex = new Cryptex(document.getElementById("cryptex"), {
        ringsCount: n,
        alphabet,
        solution: sol
      });
      cryptex.setProgress(0);
    }

    rebuild.onclick = build;
    levelDone.onclick = ()=>cryptex.unlockNextRing();
    build();
  </script>
</body>
</html>
